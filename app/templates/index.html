{% extends 'base.html' %}
{% block content %}

    <!-- Header -->
    <header>
      <div class="container" id="maincontent" tabindex="-1">
        <div class="row">
            <br/><br/><br/><br/>
            <div class="col-lg-6 col-lg-offset-3">
              <p> Cr√©er un diagramme d'entreprise a partir d'un tableau excel</p>
              <br/><br/>
              <div class="card">
                <!-- action="http://jkorpela.fi/cgi-bin/echo.cgi" for test upload form -->
                <form action="http://jkorpela.fi/cgi-bin/echo.cgi" enctype="multipart/form-data" method="post">
                  <p>
                    Veuillez upload un fichier excel<br><br/>
                    <input type="file" name="datafile" size="40">
                  </p>
                  <div>
                    
                    <button type="submit" class="btn btn-warning" value="Send">Upload Excel Document</button>
                  </div>
                </form>
              </div>
            </div>
        </div>
        <div class="row">
          
        </div>
      </div>
    </header>
    <!-- { % include 'card.html' % }-->

    <div id="fb-root"></div>
    <script>
      // This is called with the results from from FB.getLoginStatus().
      function statusChangeCallback(response) {
        if (response.status === 'connected') {
          callAPI();
        }
      }
      // This function is called when someone finishes with the Login
      // Button.
      // But it is called twice so we need to tweak it a little bit.
      var counter = 0;
      function checkLoginState() {
        counter += 1
        if (counter == 1) {
          FB.getLoginStatus(function(response) {
            statusChangeCallback(response);
          });
        }
      }

      window.fbAsyncInit = function() {
        FB.init({
          appId      : '{{ your_app_id }}',
          cookie     : true,  // enable cookies to allow the server to access
                              // the session
          xfbml      : true,  // parse social plugins on this page
          version    : 'v2.8' // use graph api version 2.8
        });

        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });
      };

      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v2.9&appId={{ your_app_id }}";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));

      function callAPI() {
        console.log('Welcome! Fetching your information.... ');
        FB.api('/me', {fields: 'id, first_name, gender'}, function(response) {
          console.log('Successful login for: ' + response.first_name);
          var url = window.location.href + 'result?first_name=' + response.first_name + '&id=' + response.id + '&gender=' + response.gender;
          window.location.href = url;
        });
      }
    </script>

    <!-- Bootstrap Core JavaScript -->
    <script src="static/js/bootstrap/bootstrap.min.js" charset="utf-8"></script>

    <!-- Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

    <!-- Theme JavaScript -->
    <script src="static/js/freelancer-theme.min.js" charset="utf-8"></script>

</body>

</html>
{% endblock %}
